<div class="container">
  <form #getGatepassForm="ngForm" [formGroup]="getGatePassCompForm">
    
    
    <div class="container col-md-6 col-xs-4">
      <h5 style="align-items: center;"> Select range of dates for when vehicle left: </h5>

      <div class="form-row">
        <div class="col-xs-4">
        <input type="date" class="form-control" name="selectStartDate" formControlName="selectStartDate" required placeholder="Start date" style="margin: 8px;">
        <span *ngIf="getGatepassForm.invalid && ( getGatePassCompForm.get('selectStartDate')?.touched && !getGatePassCompForm.get('selectStartDate')?.dirty)">
          <span class="error" ng-show="getGatepassForm.selectStartDate.$error.required">
          <i>Start date required!</i></span>                
      </span>
      </div>

      <div class="col-xs-4">
        <input type="date" class="form-control" name="selectEndDate" formControlName="selectEndDate" required placeholder="End date" (ngModelChange)="checkDates($event, $event)" style="margin: 8px;">
        <span *ngIf="getGatepassForm.invalid && ( getGatePassCompForm.get('selectEndDate')?.touched && !getGatePassCompForm.get('selectEndDate')?.dirty)">
          <span class="error" ng-show="getGatepassForm.selectEndDate.$error.required">
          <i>End date required!</i></span>                
      </span>
      </div>

      <div class="col-xs-4">
        <button class="btn btn-primary btn-block" (click)="onSelectShowResult(getGatepassForm)" style="margin: 8px;" [disabled]="!datesValid" >View</button>
      </div>

      <div class="form-group spinner-border text-secondary spinner-border-md" style="margin: 16px; padding: 4px;" role="status" *ngIf = "isFetching">
        <span class="sr-only">Loading...</span>
      </div>

      </div>

    </div>

     

  </form>

<div class="row">
    <div class="card col-md-3 col-sm-6 col-xs-6" style="width: 18rem; margin: 12px; padding:2px;" *ngFor="let num of filteredGatepasses">
        <div class="card-body">
          <h5 class="card-title">{{ num.partyName }}</h5>
          <a class="card-link" (click) ="viewGatePass(num)">View</a>
        </div>
      </div>


      <div
  class="modal"
  role="dialog"
  [ngStyle]="{'display':displayStyle}"  *ngIf="currentElementToView">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-body">
        <p>Selected gatepass details are as follows:</p>
        <table>
          <tbody>
            <tr>
                <td>Transporter Name:</td>
                <td> {{ currentElementToView.transporterName }} </td>
            </tr>
            <tr>
                <td>Vehicle Number:</td>
                <td> {{ currentElementToView.vehicleNumber }} </td>
            </tr>
            <tr>
                <td>Time vehicle entered:</td>
                <td> {{ currentElementToView.timeEntered }} </td>
            </tr>
            <tr>
                <td>Time vehicle left:</td>
                <td> {{ currentElementToView.timeLeft }} </td>
            </tr>
            <tr>
                <td>Party Name:</td>
                <td> {{ currentElementToView.partyName }} </td>
            </tr>
            <tr>
                <td>Items ordered:</td>
                <td> {{ currentElementToView.items }} </td>
            </tr>
            <tr>
                <td>Manager:</td>
                <td> {{ currentElementToView.manager }} </td>
            </tr>
            <tr>
                <td>Bill Number:</td>
                <td> {{ currentElementToView.billNumber }} </td>
            </tr>
            <tr>
                <td>PO:</td>
                <td> {{ currentElementToView.poId }} </td>
            </tr>
          </tbody>
          </table>
      </div>
      
      <div class="modal-footer">
        <button class="btn btn-secondary mr-auto btn-ok" (click)="closeGatePass()">Ok</button>
      </div>
        
    </div>
  </div>
      
</div>